<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>
              window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
              ga('create', 'UA-138683004-1', 'auto');
              ga('send', 'pageview');
            </script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"17896441":["/17896441.d458fbe4.js"],"40951796":["/40951796.8b79d75a.js"],"77404338":["/77404338.93374621.js"],"main":["/main.3c2954dd.js"],"015816e2":["/015816e2.a37b202c.js"],"02af63f8":["/02af63f8.cb555a97.js"],"075c7a17":["/075c7a17.172c78ab.js"],"076c147e":["/076c147e.2db701cb.js"],"08c25933":["/08c25933.fccf3d7a.js"],"0abd59c6":["/0abd59c6.e89de1e7.js"],"0bd57bfb":["/0bd57bfb.40ed93b9.js"],"0f78e9b3":["/0f78e9b3.f1a48845.js"],"0f85c961":["/0f85c961.b45b4609.js"],"12a16bf1":["/12a16bf1.e0144b96.js"],"1570933b":["/1570933b.e9e05ab1.js"],"1580737e":["/1580737e.9b4355a2.js"],"166e7bef":["/166e7bef.d2962393.js"],"1943dfb2":["/1943dfb2.4f04bdbd.js"],"1a9639fa":["/1a9639fa.38c9d7d5.js"],"1b7012b8":["/1b7012b8.b8588194.js"],"1b9bd3d9":["/1b9bd3d9.350f5d87.js"],"1be78505":["/1be78505.5c66bd80.js"],"1dc3c8d9":["/1dc3c8d9.3571f364.js"],"1e99f093":["/1e99f093.5aa4b944.js"],"29aa1e09":["/29aa1e09.2b200b38.js"],"2aac956c":["/2aac956c.e9c08e30.js"],"2c1965a7":["/2c1965a7.a556e68f.js"],"2d5563c8":["/2d5563c8.59e5c77b.js"],"2e1d0e00":["/2e1d0e00.72c5b0f9.js"],"2e5fe557":["/2e5fe557.92e7e4a1.js"],"3272ebf4":["/3272ebf4.805d3a15.js"],"389f1b32":["/389f1b32.01817747.js"],"38eb30df":["/38eb30df.559f3875.js"],"3a7fefd0":["/3a7fefd0.1989491b.js"],"3ab9445b":["/3ab9445b.fbcc02bc.js"],"3d54de4d":["/3d54de4d.ea35b859.js"],"3dfe9ba5":["/3dfe9ba5.a097b83d.js"],"3f900230":["/3f900230.83b8b162.js"],"3fa72edb":["/3fa72edb.19d4ca98.js"],"431ca13d":["/431ca13d.b3069838.js"],"442d7a31":["/442d7a31.c7ea5be8.js"],"444c960c":["/444c960c.0db36cd2.js"],"48cf01b6":["/48cf01b6.6773f051.js"],"4b677fa0":["/4b677fa0.57e8412c.js"],"52af37f2":["/52af37f2.e6b592da.js"],"5509b76f":["/5509b76f.9b3e13c4.js"],"565d74f4":["/565d74f4.434f19ea.js"],"56ee44b8":["/56ee44b8.c592ced9.js"],"572e4edf":["/572e4edf.de2bfa2f.js"],"5896a7ea":["/5896a7ea.4e5c4acc.js"],"591852d8":["/591852d8.3fc93243.js"],"5b8adf66":["/5b8adf66.4e56e7fb.js"],"5ba86545":["/5ba86545.0063b4eb.js"],"5c035ad5":["/5c035ad5.8bd6fdaf.js"],"5c27e93c":["/5c27e93c.bc7fe249.js"],"5c41c4c9":["/5c41c4c9.dc2fe621.js"],"5cdb502c":["/5cdb502c.e96bf049.js"],"5d293e86":["/5d293e86.4e5b6806.js"],"5df857db":["/5df857db.6022c5a3.js"],"5e12ca1d":["/5e12ca1d.e291a80e.js"],"65cd79b7":["/65cd79b7.83dfc167.js"],"67152cfe":["/67152cfe.4db8c8b0.js"],"674fa9c4":["/674fa9c4.f929eaa7.js"],"68f5cb3a":["/68f5cb3a.34639be0.js"],"696a01cf":["/696a01cf.62cc162e.js"],"69e6e3bb":["/69e6e3bb.146be638.js"],"6c11b4de":["/6c11b4de.08ec8b32.js"],"6c17cf3c":["/6c17cf3c.22c9ef31.js"],"6cb48572":["/6cb48572.ebef4e6d.js"],"6ed76f0e":["/6ed76f0e.9a087200.js"],"72d0b912":["/72d0b912.2fc10a4d.js"],"758ac1af":["/758ac1af.228cb19e.js"],"760f80dd":["/760f80dd.392a0bed.js"],"76852a88":["/76852a88.c156f040.js"],"78e9b454":["/78e9b454.e1f2189f.js"],"798c9bc2":["/798c9bc2.25d611c4.js"],"7a54a545":["/7a54a545.a60ce7d4.js"],"7a77816f":["/7a77816f.608e50c5.js"],"7b16188f":["/7b16188f.c4bc48ef.js"],"7bb2f638":["/7bb2f638.83d5b88f.js"],"840a98f0":["/840a98f0.51faf2b2.js"],"85902a93":["/85902a93.7abca9e3.js"],"86438d70":["/86438d70.449509cf.js"],"87c6a9c4":["/87c6a9c4.d1f643e3.js"],"88ab1274":["/88ab1274.5d8b38b6.js"],"8ac9c664":["/8ac9c664.73277dac.js"],"8aedf5d7":["/8aedf5d7.e2dc0b2f.js"],"8c472a46":["/8c472a46.8b2cdfe0.js"],"912240ab":["/912240ab.01a60d5d.js"],"9352d19f":["/9352d19f.81a8b2d5.js"],"93e8f896":["/93e8f896.17d8c754.js"],"940fc73a":["/940fc73a.b1d55f8c.js"],"96f9dd39":["/96f9dd39.b7298900.js"],"98ffbda8":["/98ffbda8.119c4e27.js"],"99cd0956":["/99cd0956.80dbe60b.js"],"9afda0ee":["/9afda0ee.921ae424.js"],"9c9e4252":["/9c9e4252.6023c0b2.js"],"9d672d00":["/9d672d00.7cabd98d.js"],"9e1523d0":["/9e1523d0.6a427667.js"],"9e243e3f":["/9e243e3f.3eaadb68.js"],"9eb9fa54":["/9eb9fa54.8a49acdd.js"],"a1c1515a":["/a1c1515a.d46e1cb1.js"],"a4139f5a":["/a4139f5a.d2f0223d.js"],"a57ccd44":["/a57ccd44.57a89fbf.js"],"a5852e81":["/a5852e81.1f32ed3a.js"],"a62c5788":["/a62c5788.eaab0da9.js"],"a6aa9e1f":["/a6aa9e1f.b87e8c50.js"],"a80d6cf5":["/a80d6cf5.62f00e76.js"],"a9668f36":["/a9668f36.8e58f0a3.js"],"a97faf63":["/a97faf63.36e8b3b7.js"],"a998b65c":["/a998b65c.3655f564.js"],"ac1a782b":["/ac1a782b.92ddf6b7.js"],"af6c1c80":["/af6c1c80.dd23306c.js"],"b025bb67":["/b025bb67.e8dd58f8.js"],"b0834b9a":["/b0834b9a.6026398f.js"],"b5351572":["/b5351572.f15affef.js"],"b7efbaa4":["/b7efbaa4.79373d60.js"],"bba233d4":["/bba233d4.af00c451.js"],"bdd8dcaf":["/bdd8dcaf.eeb2bbaa.js"],"c0c34336":["/c0c34336.299dc5ba.js"],"c3d0a0a5":["/c3d0a0a5.1c40af62.js"],"c41acfd1":["/c41acfd1.5ca060ce.js"],"c4f5d8e4":["/c4f5d8e4.7ec1f823.js"],"c5143b7b":["/c5143b7b.717d75db.js"],"c54ca5fe":["/c54ca5fe.73bd3b0d.js"],"c867fe7c":["/c867fe7c.470488cf.js"],"caa2e070":["/caa2e070.eba73875.js"],"cafbfab7":["/cafbfab7.0af64531.js"],"cb81218f":["/cb81218f.e9d7c0db.js"],"cc32fbde":["/cc32fbde.27971b5e.js"],"ccc49370":["/ccc49370.8d91948a.js"],"d1104007":["/d1104007.7e5d33dd.js"],"d37dc8dd":["/d37dc8dd.79488c30.js"],"d3dd1f61":["/d3dd1f61.8138b0eb.js"],"d44557c3":["/d44557c3.c3e523e7.js"],"d5b8fcd8":["/d5b8fcd8.18e6a284.js"],"d6377ff4":["/d6377ff4.fa670f99.js"],"d7647bb5":["/d7647bb5.c519c9cd.js"],"da0ebe4a":["/da0ebe4a.0581c530.js"],"daa69925":["/daa69925.827d1096.js"],"daf1756f":["/daf1756f.1b2a722e.js"],"dc7b4688":["/dc7b4688.54b9b55c.js"],"dcc53905":["/dcc53905.fce6197f.js"],"decfdbba":["/decfdbba.d2d17ceb.js"],"e076d91c":["/e076d91c.da5c215a.js"],"e16cad4d":["/e16cad4d.75bd22b0.js"],"e2603d2d":["/e2603d2d.fd83a648.js"],"e26b05e6":["/e26b05e6.b1979619.js"],"e4355444":["/e4355444.3bd560c7.js"],"e469ac48":["/e469ac48.a0094ecc.js"],"e4fbccb0":["/e4fbccb0.9441ebb3.js"],"e628667e":["/e628667e.4298b7a1.js"],"e6b6a638":["/e6b6a638.d2fb0262.js"],"e74a79a5":["/e74a79a5.919f00ca.js"],"e84c24e5":["/e84c24e5.35cd9777.js"],"eafe302d":["/eafe302d.e240b578.js"],"ec338f2c":["/ec338f2c.16b14351.js"],"ee85e528":["/ee85e528.18d42c29.js"],"ef491088":["/ef491088.838ad6b1.js"],"f2b4c57f":["/f2b4c57f.b7bca3cd.js"],"f3344494":["/f3344494.773edee3.js"],"f539466a":["/f539466a.39399dcb.js"],"f72bcd7c":["/f72bcd7c.d3693fde.js"],"f89f17ac":["/f89f17ac.a312970f.js"],"f8cfee77":["/f8cfee77.f1ca91f8.js"],"f91e79c8":["/f91e79c8.11f74c34.js"],"f9617f5b":["/f9617f5b.0f75d7cc.js"],"fa29c2d5":["/fa29c2d5.994c3ec6.js"],"fcc2aa60":["/fcc2aa60.3c0c504f.js"],"fcfac0f1":["/fcfac0f1.b286bb4a.js"],"fe4bf730":["/fe4bf730.7ba1eaca.js"],"feb0df8a":["/feb0df8a.856de619.js"],"ff185f4e":["/ff185f4e.fe90abde.js"]};/*]]>*/</script>

<title data-react-helmet="true">Blog</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" property="og:title" content="Blog"/><meta data-react-helmet="true" name="description" content="Blog"/><meta data-react-helmet="true" property="og:description" content="Blog"/><meta data-react-helmet="true" property="og:image" content="https://single-spa.github.io/ru.single-spa.js.org/img/docusaurus.png"/><meta data-react-helmet="true" property="twitter:image" content="https://single-spa.github.io/ru.single-spa.js.org/img/docusaurus.png"/><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Blog"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/logo-blue-favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/styles.d67aca24.css" />

</head>
<body >
<script type="text/javascript">(function() {
  function setDataThemeAttribute(theme) {
    document.querySelector('html').setAttribute('data-theme', theme);
  }
  
  var preferDarkQuery = '(prefers-color-scheme: dark)';
  var mql = window.matchMedia(preferDarkQuery);
  var supportsColorSchemeQuery = mql.media === preferDarkQuery;
  var localStorageTheme = null;
  try {
    localStorageTheme = localStorage.getItem('theme');
  } catch (err) {}
  var localStorageExists = localStorageTheme !== null;

  if (localStorageExists) {
    setDataThemeAttribute(localStorageTheme);
  } else if (supportsColorSchemeQuery && mql.matches) {
    setDataThemeAttribute('dark');
  }
})();</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo-white-bgblue.svg" alt="single-spa Logo"/><strong class="">single-spa</strong></a><a class="navbar__item navbar__link" style="white-space:nowrap;padding:0.25rem 0.5rem 0.2rem 0.25rem;font-size:calc(0.9 * var(--ifm-font-size-base));text-decoration:underline" href="/versions">5.x</a><a class="navbar__item navbar__link" href="/docs/faq/">FAQ</a><a class="navbar__item navbar__link" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/help/">Help</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://opencollective.com/single-spa">Donate</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/single-spa/single-spa">GitHub</a><a class="navbar__item navbar__link" href="/languages">简Жहि Languages</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"/></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo-white-bgblue.svg" alt="single-spa Logo"/><strong>single-spa</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" style="white-space:nowrap;padding:0.25rem 0.5rem 0.2rem 0.25rem;font-size:calc(0.9 * var(--ifm-font-size-base));text-decoration:underline" href="/versions">5.x</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/faq/">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/help/">Help</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog/">Blog</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://opencollective.com/single-spa">Donate</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/single-spa/single-spa">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="/languages">简Жहि Languages</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--xl"><div class="row"><div class="col col--8 col--offset-2"><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_2RZH"><a href="/blog/2020/02/24/single-spa-5">single-spa 5</a></h2><div class="margin-bottom--sm"><time dateTime="2020-02-24T00:00:00.000Z" class="blogPostDate_3tRe">February<!-- --> <!-- -->24<!-- -->, <!-- -->2020</time></div><div class="avatar margin-bottom--md"><a class="avatar__photo-link" href="https://twitter.com/joelbdenning" target="_blank" rel="noreferrer noopener"><img class="avatar__photo" src="https://avatars2.githubusercontent.com/u/5524384?s=460&amp;v=4" alt="Joel Denning"/></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://twitter.com/joelbdenning" target="_blank" rel="noreferrer noopener">Joel Denning</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor" id="announcing-single-spa5"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#announcing-single-spa5" title="Direct link to heading">#</a>Announcing single-spa@5</h1><p>Today we released single-spa@5.0.0.</p><p>Here are the highlights:</p><ul><li>Performance focus: 35% decrease in library size.</li><li>A CLI for single-spa: <a href="/docs/create-single-spa">create-single-spa</a></li><li>New tutorial videos: <a href="https://www.youtube.com/playlist?list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU">Youtube playlist</a> / <a href="https://space.bilibili.com/495254378/video">Bilibili space</a></li><li>New framework-specific example repositories - <a href="https://github.com/react-microfrontends">React example</a>, <a href="https://github.com/vue-microfrontends">Vue example</a>, <a href="https://github.com/polyglot-microfrontends">Multiple frameworks example</a>, <a href="/docs/examples">Full list</a></li><li>Massively improved documentation, including <a href="/docs/microfrontends-concept">Concept: Microfrontends</a> and <a href="/docs/recommended-setup">The Recommended Setup</a>.</li></ul><p><a href="https://github.com/single-spa/single-spa/releases/tag/v5.0.0">Release notes here</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="migration-from-4-to-5"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#migration-from-4-to-5" title="Direct link to heading">#</a>Migration from 4 to 5</h2><p>For every user we&#x27;re aware of, <strong>you do not need to change anything in your code in order to upgrade to single-spa@5</strong>. The breaking changes listed in the release notes are the removal of features that were originally used by Canopy Tax, but were never documented.</p><p>If installing from npm, you can simply <code>npm install --save single-spa@5.0.0</code> or <code>yarn add single-spa@5.0.0</code>.</p><p>Alternatively, single-spa is available on <a href="https://cdnjs.com/libraries/single-spa">cdnjs</a>, <a href="https://www.jsdelivr.com/package/npm/single-spa">jsdelivr</a>, and <a href="https://unpkg.com/browse/single-spa/">unpkg</a>.</p><p>The single-spa core team is committed to treating our users well, which includes not introducing massive breaking changes. The core single-spa API has not seen massive breaking changes <a href="https://github.com/single-spa/single-spa/releases/tag/v3.0.0">since single-spa@3 in August 2016</a>. We have added features and improved things, but single-spa is a stable technology. We are committed to maintaining it, documenting it, and adjusting it as technologies like in-browser modules become more and more popular and viable.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="performance-improvements"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#performance-improvements" title="Direct link to heading">#</a>Performance improvements</h2><p>The ESM version of single-spa@4 was 23.8kb (7.2kb gzipped). That was improved in single-spa@5 to 15.5kb (5.1kb gzipped). We did this by optimizing our build process and removing unused features.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="single-spa-cli"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#single-spa-cli" title="Direct link to heading">#</a>single-spa CLI</h2><p>Since single-spa&#x27;s inception, bundler configuration has been a huge source of user pain. We have heard this pain and implemented <a href="/docs/create-single-spa">create-single-spa</a>, which creates (and sometimes can update) repositories that are ready to be used as single-spa microfrontends. For Angular and Vue, the official CLIs are used with a few extra plugins automatically installed. For React, a default webpack config with decent eslint / prettier defaults is set up.</p><p>Additionally, we have added a lot of documentation for webpack in <a href="/docs/next/recommended-setup#build-tools-webpack--rollup">The Recommended Setup</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="tutorial-videos"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#tutorial-videos" title="Direct link to heading">#</a>Tutorial videos</h2><p>We understand that single-spa is more than just a library - it is an architecture. The single-spa library itself is the core, but the surrounding ecosystem of concepts and libraries are equally important to successfully migrating to single-spa and having it work for you. As such, we have created a Youtube playlist, currently consisting of seven videos, to help you get started.</p><p><a href="https://www.youtube.com/playlist?list=PLLUD8RtHvsAOhtHnyGx57EYXoaNsxGrTU">Youtube playlist</a> / <a href="https://space.bilibili.com/495254378/video">Bilibili space</a></p><p>The videos currently cover the following topics:</p><ul><li>What are Microfrontends?</li><li>In-browser vs build-time JavaScript modules</li><li>Import Maps</li><li>Local Development with single-spa and import maps</li><li>Deploying Microfrontends / Continuous Integration (CI)</li><li>SystemJS intro</li><li>Lazy Loading</li><li>Bundlers, webpack, and rollup.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="new-example-repositories"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-example-repositories" title="Direct link to heading">#</a>New example repositories</h2><p>What started out as Canopy Tax&#x27;s special sauce for independently deployed frontend microservices is now fully accessible to the public with our <a href="/docs/examples">new set of example repos</a>. We have a React example, a Vue example, and a polyglot (multiple framework) example. We hope to add an Angular example, after we achieve support for Angular 9. These example repositories are actively watched and maintained by the single-spa core team, and reflect our current opinions on the best, production-viable way to do microfrontends.</p><p>Furthermore, we have deployed each of the examples to our new domains:</p><ul><li><a href="https://react.microfrontends.app">https://react.microfrontends.app</a></li><li><a href="https://polyglot.microfrontends.app">https://polyglot.microfrontends.app</a></li><li><a href="https://vue.microfrontends.app">https://vue.microfrontends.app</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="documentation-overhaul"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#documentation-overhaul" title="Direct link to heading">#</a>Documentation overhaul</h2><p>We removed several dated documentation pages, and added several that were very much lacking. Here are a few pages that give you the most bang for your buck:</p><ul><li><a href="/docs/microfrontends-concept">Concept: Microfrontend</a></li><li><a href="/docs/recommended-setup">The Recommended Setup</a></li><li><a href="/docs/create-single-spa">create-single-spa CLI</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="development-builds-and-error-codes"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#development-builds-and-error-codes" title="Direct link to heading">#</a>Development builds and error codes</h2><p>Taking inspiration from the <a href="https://reactjs.org/docs/optimizing-performance.html#use-the-production-build">react development and production builds</a>, we now publish to NPM both development and production builds in the following formats: UMD, ESM, and System.register.</p><p>You can see the <a href="https://unpkg.com/browse/single-spa@5.0.0/lib/">published build files here</a>. The <code>.dev.js</code> files provide full debugging information in the browser console, whereas the <code>.min.js</code> files give you a numeric error code and a link to a documentation page that explains the error. We hope that these error codes and documentation for them will improve discoverability of relevant documentation when you&#x27;re setting up single-spa.</p><p>An example of these new documentation pages for error codes is <a href="/error/?code=35&amp;arg=application&amp;arg=app1&amp;arg=%7B%7D">found here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="governance"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#governance" title="Direct link to heading">#</a>Governance</h2><p>Some of you may have noticed that we recently moved all github repos from <a href="https://github.com/CanopyTax">https://github.com/CanopyTax</a> to <a href="https://github.com/single-spa">https://github.com/single-spa</a>. Canopy Tax was the company where single-spa was first authored, but as a core team we asked to move ownership and governance of the projects to an organization fully managed by the open source community. In agreement with Canopy, we made that change.</p><p>This change does not mean anything drastic for single-spa. Its license was and is MIT, and we have no plans to do anything with the project besides make it better.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="where-next"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#where-next" title="Direct link to heading">#</a>Where next?</h2><p>We are actively <a href="https://github.com/single-spa/zh-hans.single-spa.js.org">translating the single-spa documentation to Chinese</a>, and hope to add other languages soon. We will add full <a href="https://github.com/single-spa/single-spa-angular/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+is%3Aopen+angular+9">Angular 9 support</a> soon, and hope to add <a href="https://github.com/single-spa/single-spa/issues/103">server rendering</a> in an upcoming release.</p><p>Please <a href="http://localhost:3000/docs/next/contributing-overview">contribute to our code</a> and <a href="/docs/ecosystem">ecosystem</a>, <a href="https://join.slack.com/t/single-spa/shared_invite/zt-j4c38g92-JmV7O~35dkN1CnaBkK7NTw">join our single-spa slack channel</a>, <a href="https://twitter.com/Single_spa">follow our official Twitter account</a>, and contribute to <a href="https://opencollective.com/single-spa">our open collective</a>. The <a href="/contributors">single-spa core team</a> all have full-time jobs and maintain this project on a volunteer basis.</p></section><footer class="row margin-vert--lg"><div class="col text--right"><a aria-label="Read more about single-spa 5" href="/blog/2020/02/24/single-spa-5"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_2RZH"><a href="/blog/2019/02/20/single-spa-inspector">single-spa Inspector and 4.1</a></h2><div class="margin-bottom--sm"><time dateTime="2019-02-20T00:00:00.000Z" class="blogPostDate_3tRe">February<!-- --> <!-- -->20<!-- -->, <!-- -->2019</time></div><div class="avatar margin-bottom--md"><a class="avatar__photo-link" href="https://twitter.com/aahfrena" target="_blank" rel="noreferrer noopener"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/1037162092963348480/1XLEV4MK_400x400.jpg" alt="Anthony Frehner"/></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://twitter.com/aahfrena" target="_blank" rel="noreferrer noopener">Anthony Frehner</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="background"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#background" title="Direct link to heading">#</a>Background</h2><p>For a long time, Canopy has had the benefit of using a tool called <a href="https://github.com/single-spa/sofe-inspector">sofe inspector</a> (note: this is an out-of-date version of it) to list, override, and interact with single-spa applications. There has always been a desire to <a href="https://github.com/single-spa/single-spa/issues/151">figure out how to share this tool so others can benefit as well</a>.</p><p>With that in mind, I&#x27;m proud to announce an initial release for <strong><a href="https://github.com/single-spa/single-spa-inspector">single-spa Inspector</a></strong>! single-spa Inspector is a Firefox and Chrome extension, much like React/Vue devtools, that allows you see and interact with your single-spa applications and configuration.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="current-inspector-features"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#current-inspector-features" title="Direct link to heading">#</a>Current Inspector Features</h2><ul><li>List registered applications</li><li>Show application status</li><li>Force an app to mount or unmount</li><li>Hover over an app name to have an &quot;inspect element&quot;-like view of your apps (Overlays)</li></ul><p>(Note: Overlays require a small update to your code, but should hopefully be simple! See <a href="https://github.com/single-spa/single-spa-inspector#configuring-app-overlays">how to configure app overlays</a>)</p><p><strong>The single-spa Inspector will only work with single-spa versions 4.1 and higher</strong>, since we had to expose and add some functionality to the single-spa library itself in order to implement these features.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="single-spa-41"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#single-spa-41" title="Direct link to heading">#</a>single-spa 4.1</h2><p>single-spa 4.1 was released, which includes a couple of key updates:</p><ol><li>Support for single-spa Inspector</li><li>ESM bundle output</li><li>Simpmlified test configuration for developers/contributors to single-spa</li></ol><p>For most people, ESM (EcmaScript Module) support shouldn&#x27;t affect how you use single-spa, but for those looking to play around with modules or other advanced Javascript things, it&#x27;s a welcome addition.</p><p>We also changed our test suite to purely use Jest instead of Saucelabs, and hopefully false positive &quot;failing&quot; tests on pull requests will be a thing of the past.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="help-wanted"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#help-wanted" title="Direct link to heading">#</a>Help Wanted!</h2><p>If you would like to suggest a new feature for single-spa Inspector, report a bug, improve our (admittedly horrible and hopefully temporary) UI/UX, or add features, please see the <a href="https://github.com/single-spa/single-spa-inspector">github repo</a> and hack away!</p><p>We also hope to update some of our example repos to the lastest single-spa so that anyone with the extension installed can test out the features and see how to implement overlays. But this process will go faster if someone wants to help out. :)</p><p>Thank you!</p></section><footer class="row margin-vert--lg"><div class="col text--right"><a aria-label="Read more about single-spa Inspector and 4.1" href="/blog/2019/02/20/single-spa-inspector"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_2RZH"><a href="/blog/2018/06/19/single-spa-parcels-explained">single-spa parcels, explained</a></h2><div class="margin-bottom--sm"><time dateTime="2018-06-19T00:00:00.000Z" class="blogPostDate_3tRe">June<!-- --> <!-- -->19<!-- -->, <!-- -->2018</time></div><div class="avatar margin-bottom--md"><a class="avatar__photo-link" href="https://twitter.com/joelbdenning" target="_blank" rel="noreferrer noopener"><img class="avatar__photo" src="https://avatars2.githubusercontent.com/u/5524384?s=400&amp;u=ff145fcb2ae5305555628a446e9f725d4e145aaa&amp;v=4" alt="Joel Denning"/></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://twitter.com/joelbdenning" target="_blank" rel="noreferrer noopener">Joel Denning</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>Ever since single-spa@1.0.0, the single-spa team has been dedicated to bringing microservices to the frontend. We have made it possible for AngularJS, React, Angular, Vue, and other frameworks to coexist side by side in the same page.</p><p>And with the release of <a href="https://github.com/single-spa/single-spa/releases/tag/v4.0.0">version 4</a>, I’m pleased to announce that <a href="https://github.com/single-spa/single-spa">single-spa</a> is expanding that effort so that <strong><em>individual components</em></strong> written with different frameworks can interoperate. It is new terrain for the single-spa community, which previously had focused on getting large applications to interoperate with each other, instead of the individual components.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="another-way-to-do-framework-agnostic-components"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#another-way-to-do-framework-agnostic-components" title="Direct link to heading">#</a>Another way to do framework agnostic components?</h2><p>For those familiar with <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">web components</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements">custom elements</a>, you may be wondering why a JavaScript library would try to do what browsers are starting natively to do.</p><p>And as one of the contributors to the custom elements polyfill, let me be the first one to say that we did not make this decision lightly.</p><p>If you’re interested in diving into the details, check out <a href="https://medium.com/canopy-tax/one-companys-relationship-with-custom-elements-d360baf3b253">One Company’s Relationship With Custom Elements</a>, which explains some of the difficulties we’ve been through with web components and custom elements.</p><p>TLDR: React and some other frameworks don’t interop with custom elements very well. Additionally dealing with inner HTML, attributes vs properties, and customized builtins can be a pain.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="okay-but-you-havent-told-me-what-a-single-spa-parcel-is"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#okay-but-you-havent-told-me-what-a-single-spa-parcel-is" title="Direct link to heading">#</a>Okay but you haven’t told me what a single-spa parcel is</h2><p>A parcel is single-spa’s way of building a component in one framework and using it in another.</p><p>To implement a parcel, just create a JavaScript object that has 3–4 functions on it. We call this JavaScript object a <em>parcel config</em> and there are three required functions to implement: bootstrap, mount, and unmount. A fourth function, update, is optional.</p><p>Each of the functions will be called by single-spa at the right time, but the parcel config will control what happens. In other words, single-spa controls the “when,” but the parcel config controls the “what” and the “how.”</p><p>Once you’ve implemented the parcel config, simply call singleSpa.mountRootParcel(parcelConfig, parcelProps) to mount it. This is the key to what makes parcels framework agnostic — regardless of whether the parcel config is implemented with React, Angular, Vue, or anything else, to use the parcel you always just call mountRootParcel().</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="a-few-more-specifics"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#a-few-more-specifics" title="Direct link to heading">#</a>A few more specifics</h2><p>We’ve glossed over a few things that I want to touch on real quick:</p><ul><li><p><strong>How do you implement the lifecycle functions on the parcel config?</strong></p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Use a helper library for your framework of choice. [single-spa-react](https://github.com/single-spa/single-spa-react), [single-spa-angular](https://github.com/single-spa/single-spa-angular) (for angular@2+), [single-spa-angularjs](https://github.com/single-spa/single-spa-angularjs), [single-spa-vue](https://github.com/single-spa/single-spa-vue), and [others](https://github.com/single-spa/single-spa/blob/master/docs/single-spa-ecosystem.md) will implement the entire parcel config for you.</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></li><li><p><strong>What are the props you pass to mountRootParcel()?</strong></p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">The props passed as the second argument to singleSpa.mountRootParcel(parcelConfig, parcelProps) are an object with one required prop and as many custom props as you’d like. The required prop is domElement, which tells the parcel where to mount. And the custom props get passed through to the parcel config lifecycle functions.</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></li><li><p><strong>How do you re-render and unmount a parcel?</strong></p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">The singleSpa.mountRootParcel() function returns a parcel object that lets you re-render and unmount the parcel whenever you’d like to.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &lt;iframe src=&quot;https://medium.com/media/b2d981b380b937009f7ce84e1cc2d753&quot; frameBorder=&quot;0&quot; /&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="syntactic-sugar-makes-this-easier"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#syntactic-sugar-makes-this-easier" title="Direct link to heading">#</a>Syntactic sugar makes this easier</h2><p>Calling all of those functions manually might get annoying. So let’s make it easier. Here’s an example of some syntactic sugar for React. Similar features will be added soon for Angular, Vue, and other frameworks.</p><iframe src="https://medium.com/media/9b5904d3423359cb2eef410f9ee35648" frameBorder="0"></iframe><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="how-hard-is-it-to-try-this-out"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-hard-is-it-to-try-this-out" title="Direct link to heading">#</a>How hard is it to try this out?</h2><p>You can get started with parcels immediately, without using the rest of single-spa. To do so, either npm install or script tag single-spa, then call mountRootParcel with your first parcel config.</p><p>You can also check out <a href="https://codepen.io/joeldenning/pen/qKVoQg?editors=0010#0">this codepen example</a> to start out.</p><p>And if you are already a user of <a href="https://github.com/single-spa/single-spa/blob/master/docs/applications.md">single-spa applications</a>, parcels mean that your applications can mount and unmount shared functionality whenever you want them to. Since parcels don’t have <a href="https://github.com/single-spa/single-spa/blob/master/docs/configuration#activity-function">activity functions</a>, you don’t have to set up routes for them.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="let-us-know-what-you-think"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#let-us-know-what-you-think" title="Direct link to heading">#</a>Let us know what you think!</h2><p>We’d love to get your feedback on parcels. What do you think of this new way of framework interop? Is the implementation easy to understand? Are parcels useful for you or do they not quite fit into what you’re trying to accomplish?How hard was it for you to try out?</p><p>Check out the <a href="https://github.com/single-spa/single-spa/blob/master/docs/parcels.md">official docs</a> for more examples, explanations, and <a href="https://github.com/single-spa/single-spa/blob/master/docs/parcels-api.md">api documentation</a>.</p><p>And let us know your thoughts in the <a href="https://join.slack.com/t/single-spa/shared_invite/zt-j4c38g92-JmV7O~35dkN1CnaBkK7NTw">single-spa Slack channel</a>, a <a href="https://github.com/single-spa/single-spa/issues">Github issue</a>, or <a href="https://twitter.com/Single_spa">on Twitter</a>!</p></section><footer class="row margin-vert--lg"><div class="col text--right"><a aria-label="Read more about single-spa parcels, explained" href="/blog/2018/06/19/single-spa-parcels-explained"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_2RZH"><a href="/blog/2016/12/16/a-step-by-step-guide-to-single-spa">A step-by-step guide to single-spa</a></h2><div class="margin-bottom--sm"><time dateTime="2016-12-16T00:00:00.000Z" class="blogPostDate_3tRe">December<!-- --> <!-- -->16<!-- -->, <!-- -->2016</time></div><div class="avatar margin-bottom--md"><a class="avatar__photo-link" href="https://twitter.com/Joelbdenning" target="_blank" rel="noreferrer noopener"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/716746867451625472/2NMyKAd1_400x400.jpg" alt="Joel Denning"/></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://twitter.com/Joelbdenning" target="_blank" rel="noreferrer noopener">Joel Denning</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>Running Angular 1, React, Angular 2, and Vue.js side by side sounds pretty cool. And it seems appealing to have multiple applications coexisting on the same page, each lazily loaded.</p><p>But using <a aria-current="page" class="active" href="/">single-spa</a> for the first time can be tricky because you’ll come across terms like “application lifecycles”, “root application”, “loading function”, “child application”, and “activity function.”</p><p>This blog post will take you through setting things up and what choices you have when using single-spa. It’s based on what I’ve seen at <a href="https://medium.com/canopy-tax">Canopy Tax</a> where we went from an Angular 1 monolith to an Angular 1, React, and Svelte polyglot.</p><p>If you’d like to jump straight to a fully working, self contained code example, check out this <a href="https://github.com/joeldenning/simple-single-spa-webpack-example">webpack single-spa starter project</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="step-one-choose-a-module-loader"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-one-choose-a-module-loader" title="Direct link to heading">#</a>Step One: choose a module loader.</h2><p>Your module loader / bundler is the library you’ll use to lazy load code. I recommend either <a href="https://webpack.js.org/">Webpack</a> or <a href="https://jspm.io/">JSPM</a>, if you’re starting from scratch.</p><p>If you go with Webpack, try to use Webpack 2 if you can, since it has <a href="https://webpack.js.org/guides/migrating/#code-splitting-with-es2015">support for promise-based lazy loading</a>. This will make things easier for you later on, since single-spa requires that your <a href="https://github.com/single-spa/single-spa/blob/master/docs/root-application.md#loading-function">loading functions</a> return promises. If you can’t use Webpack 2, getting single-spa to lazy load your code with Webpack 1 will require some boilerplate code.</p><p>JSPM/SystemJS has worse documentation than Webpack, but is a great solution for module loading if you can get past that. I recommend using jspm@0.17 — it’s still in beta but has been worked on for over a year and at Canopy we find it stable enough to use in production.</p><p>If you’re struggling to decide between the two, then ask yourself the following: Do I want multiple completely separate bundles? If you don’t, I recommend Webpack because it has better docs, a larger community, and fewer gotchas. Otherwise, I’d go with JSPM, since Webpack has no plans to support dynamic runtime loading <a href="https://twitter.com/TheLarkInn/status/789968589419745280">(See tweet below from Mr. Larkin, himself)</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="step-two-create-a-brand-new-html-file"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-two-create-a-brand-new-html-file" title="Direct link to heading">#</a>Step Two: create a brand new HTML file</h2><p>The next step is to create what single-spa calls your <a href="https://github.com/single-spa/single-spa/blob/master/docs/root-application.md">“root application.”</a> Really your root application is just the stuff that initializes single-spa, and it starts with an HTML file.</p><p>Even if you’ve got an existing project that already has it’s own HTML file, I recommend starting fresh with a new HTML file. That way, there is a clear distinction between what is in your root application (shared between all apps) and what is in a child application (not shared with everything).</p><p>You’ll want to keep your root application as small as possible, since it’s sort of the master controller of everything and could become a bottleneck. You don’t want to be constantly changing both the root application and the child applications.</p><p>So for now, just have a <code>&lt;script&gt;</code> to a single JavaScript file (root-application.js), which will be explained in Step Three.</p><p>Since Webpack is probably the more common use case, my code examples from here on will assume that you’re using Webpack 2. The equivalent Webpack 1 or JSPM code has all the same concepts and only some minor code differences.</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-html codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token doctype" style="color:rgb(199, 146, 234);font-style:italic">&lt;!DOCTYPE html&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">html</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">head</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">meta</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">charset</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">utf-8</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">meta</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">name</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">viewport</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">content</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">width=device-width</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">title</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">A single-spa application</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">title</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">head</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">id</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">cool-app</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">script</span><span class="token tag" style="color:rgb(255, 85, 114)"> </span><span class="token tag attr-name" style="color:rgb(255, 203, 107)">src</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 85, 114)">root-application.js</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">html</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="step-three-register-an-application"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-three-register-an-application" title="Direct link to heading">#</a>Step Three: register an “application”</h2><p>Now it’s time to finish up your root application by writing your “root-application.js” file. The primary purpose of root-application.js is to call <a href="https://github.com/single-spa/single-spa/blob/master/docs/root-application.md#declaring-child-applications">singleSpa.registerApplication(..)</a> for each of the applications that will be managed by single-spa.</p><p>If you’re into analogies, you can think of single-spa as the operating system for your single page application, managing which “processes” (or “child applications”) are running at any given time. At any moment, some of the child applications will be active on the DOM and others will not. As the user navigates throughout the app, some applications will be unmounting from the DOM and others will be mounting to the DOM.</p><p>Another way to look at it is that single-spa is a master router on top of your other routers.</p><p>To do this, first <code>npm install single-spa</code> and then call the <a href="https://github.com/single-spa/single-spa/blob/master/docs/root-application.md#declaring-child-applications">registerApplication</a> function:</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">registerApplication</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> start</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Register your first application with single-spa. More apps will be registered as you create them</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">registerApplication</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cool-app&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> loadCoolApp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> isCoolAppActive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Tell single-spa that you&#x27;re ready for it to mount your application to the DOM</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">start</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// This is a &quot;loading function&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">loadCoolApp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./cool-app/cool.app.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// This is an &quot;activity function&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">isCoolAppActive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">location</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">hash</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">startsWith</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;#/cool&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>Because single-spa is <em>so very</em> cool, we’ve created an app called “cool-app” that will be lazy loaded and mounted to the DOM whenever the url hash starts with <code>#/cool</code>.</p><p>The <code>loadCoolApp</code> function is what single-spa calls a loading function. Inside of it, the <code>import</code> introduces a code splitting point — Webpack will create separate code chunks that will be lazy loaded by single-spa.</p><p>For your specific project, you probably won’t have a hash prefix of “cool”, but I recommend establishing some kind of convention that makes it easy to determine which apps are active. This will simplify the maintenance of your activity functions, as you add more and more child applications.</p><p>If you’re going to start out with just one child application, then it might make sense to implement the activity function as <code>() =&gt; true</code>. You can worry about getting fancier once you have more than one application.</p><p>The last thing is to call <code>start()</code>. This is something you <strong>must do for things to work.</strong> The purpose is to give control over timing and performance. But until that is a concern, <code>start</code> is just one of those things you do, and then maybe <a href="https://github.com/single-spa/single-spa/blob/master/docs/single-spa-api.md#start">read about it</a> later if you ever need to.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="step-four-create-appjs-file"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-four-create-appjs-file" title="Direct link to heading">#</a>Step Four: create “.app.js” file</h2><p>When you open up your index.html file in the browser, you’ll now see….. a blank screen! We’re really close, but there’s one crucial step left: building your app.js file.</p><p>After that, you’ll have everything working for your first single-spa application.</p><p>An app.js file is a configuration file that you create for each child application. It is the code that is lazy loaded when your activity function returns true.</p><p>There are three things that you need to implement in the app.js file:</p><ol><li><a href="" target="_blank" rel="noopener noreferrer">A bootstrap lifecycle</a></li><li><a href="" target="_blank" rel="noopener noreferrer">A mount lifecycle</a></li><li><a href="" target="_blank" rel="noopener noreferrer">An unmount lifecycle</a></li></ol><p>A “lifecycle” is a function or array of functions that will be called by single-spa; you export these from the app.js file. Each function must return a Promise so that single-spa knows when it is completed.</p><p>Here is a simple example:</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// single-spa will import this file and call the exported lifecyle functions</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">let</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">bootstrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">fetch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/api/users/0&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">response</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">json</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">user </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* This is normally where you would have your framework-specific code like</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">   * ReactDOM.render or angular.bootstrap(). The fact that you can put *anything*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">   * into this function is what makes single-spa so powerful -- any framework</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">   * can implement a &quot;mount&quot; and &quot;unmount&quot; to become a single-spa application.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">   */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Promise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;user-app&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token template-string embedded-code html"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string embedded-code html">        &lt;div&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string embedded-code html">          Hello ${user.name}!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string embedded-code html">        &lt;div&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token template-string embedded-code html">      </span><span class="token template-string template-punctuation string" style="color:rgb(195, 232, 141)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">unmount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">/* Real world use cases would be something like ReactDOM.unmountComponentAtNode()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">   * or vue.$destroy()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">   */</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Promise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;user-app&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">innerHTML</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>At this point, you might be seeing the <code>document.getElementById</code> and <code>innerHTML =</code> and worry that you’ve been duped — maybe single-spa is really just a poor excuse for a ui component framework.</p><p>And really, don’t we already have a lot of different ways to write UI components?</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="getting-all-of-those-frameworks-to-work-together"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#getting-all-of-those-frameworks-to-work-together" title="Direct link to heading">#</a>Getting all of those frameworks to work together.</h3><p><em>Using multiple frameworks</em> is where single-spa really shines. It is not a ui framework itself, but a framework for using other frameworks.</p><p>Each child application can be written in any framework, so long as it implements application lifecycle functions. Then the mini-apps cooperate to form the entire single page application.</p><p>So going back to our previous example, we could choose to write our “cool.app.js” as an Angular 1 app, and choose something else for future apps:</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> singleSpaAngularJS </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa-angularjs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> angular </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;angular&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./app.module.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;./routes.js&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">domElementGetter</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(191, 199, 213)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;cool-app&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> angularLifecycles </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">singleSpaAngularJS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  angular</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  domElementGetter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mainAngularModule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;single-spa-app&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  uiRouter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  preserveGlobal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> bootstrap </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  aboutToBootstrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  angularLifecycles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bootstrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  doneBootstrapping</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> mount </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">angularLifecycles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">mount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> unmount </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">angularLifecycles</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">unmount</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">aboutToBootstrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;about to bootstrapping&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Promise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">doneBootstrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 107)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;finished bootstrapping&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">Promise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>In this example, we use a helper library called <a href="https://github.com/single-spa/single-spa-angularjs">single-spa-angularjs</a> which abstracts away the specifics of initializing Angular 1 apps. This blogpost doesn’t show you the <code>app.module.js</code> or <code>routes.js</code> files, but you can see an example implementation <a href="https://github.com/single-spa/single-spa-examples/tree/master/src/angularJS">here</a>.</p><p>The pattern is to call <code>singleSpaAngularJS</code> at the very beginning, which returns <code>bootstrap</code>, <code>mount</code>, and <code>unmount</code> lifecycle functions for you.</p><p>You might notice that this time the lifecycles are exported as arrays of functions instead of just functions — you can choose whichever works best for you.</p><p>The advantage of exporting an array of functions is that you can add in your own custom behavior (like <code>aboutToBootstrap</code> and <code>doneBootstrap</code>) that will run before or after the Angular 1 lifecycles. When you export an array, each item in the array must be a function that returns a promise. Single-spa will wait for each promise to resolve, in order, before calling the next function in the array.</p><p>To learn more about single-spa helper libraries, check out these github projects:</p><ul><li><a href="https://github.com/single-spa/single-spa-angularjs" target="_blank" rel="noopener noreferrer">single-spa-angularjs</a></li><li><a href="https://github.com/single-spa/single-spa-angular" target="_blank" rel="noopener noreferrer">single-spa-angular</a></li><li><a href="https://github.com/single-spa/single-spa-react" target="_blank" rel="noopener noreferrer">single-spa-react</a></li><li><a href="https://github.com/single-spa/single-spa-vue" target="_blank" rel="noopener noreferrer">single-spa-vue</a></li><li><a href="https://github.com/single-spa/single-spa-svelte" target="_blank" rel="noopener noreferrer">single-spa-svelte</a></li><li><a href="https://github.com/single-spa/single-spa-preact" target="_blank" rel="noopener noreferrer">single-spa-preact</a></li></ul><p>You can also see a fully working example of an angular app coexisting with other apps at the <a href="https://github.com/single-spa/single-spa-examples">single-spa-examples</a> repo or the <a href="http://single-spa.surge.sh/">live demo</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="step-five-test-it-out"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#step-five-test-it-out" title="Direct link to heading">#</a>Step Five: test it out!</h2><p>Refresh your page and you should now have a functioning single-spa application!</p><p>Try navigating to a url that your child app is active for (<code>#/cool</code>) and then navigating away from it. When you do so, the page will not refresh but you should see your application mount itself to the DOM and then unmount.</p><p>If you run into problems, try to narrow down whether the problem is in the root application or in the child application. Is your root application being executed? Are the declareChildApplication calls being made? Have you called <code>start()</code>? Is there a network request to download the code for your child application? Is your child application&#x27;s <code>bootstrap</code> lifecycle being called? What about <code>mount</code>?</p><img src="https://cdn-images-1.medium.com/max/1600/1*WMFuo-hz-Q31UVbTHAx4lw.png" alt="cdn-images-1"/><p>It may be helpful to add a navigation menu, so you can verify everything mounts and unmounts to the DOM correctly. If you want to level up your single-spa skills even more, make the navigation menu an entire child application whose activity function is <code>() =&gt; true</code>. An example that does just that is found <a href="https://github.com/single-spa/single-spa-examples/blob/master/src/single-spa-examples.js#L3">here</a> and <a href="https://github.com/single-spa/single-spa-examples/blob/master/src/navbar/navbar.app.js">here</a>.</p><p>While you are verifying that everything is working, keep in mind that each application goes through five phases:</p><img src="https://cdn-images-1.medium.com/max/1600/1*utKlcxBkDXfQAQR52B0hAA.png" alt="an applications&#x27;s lifecycle"/><p>Conclusion</p><p>As you get your feet wet, you’ll probably run into some (hopefully small) hiccups setting things up. When this tutorial is not enough, there are other resources on <a href="https://github.com/single-spa/single-spa">Github</a> and here in the <a href="docs/building-applications.html">docs</a>.</p><p>Single-spa is still a relatively new thing, and we’d love to hear your feedback and questions. We welcome contributions from everyone.</p><p>If you’re excited about the possibilities, feel free to contact me on <a href="https://twitter.com/Joelbdenning">twitter (@joelbdenning)</a>. And if you are not excited, then still feel free to contact me, but only after you leave some nasty comments :)</p></section><footer class="row margin-vert--lg"><div class="col text--right"><a aria-label="Read more about A step-by-step guide to single-spa" href="/blog/2016/12/16/a-step-by-step-guide-to-single-spa"><strong>Read More</strong></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="margin-bottom--sm blogPostTitle_2RZH"><a href="/blog/2016/02/26/a-case-for-soa-in-the-browser">A Case for SOA in the Browser</a></h2><div class="margin-bottom--sm"><time dateTime="2016-02-26T00:00:00.000Z" class="blogPostDate_3tRe">February<!-- --> <!-- -->26<!-- -->, <!-- -->2016</time></div><div class="avatar margin-bottom--md"><a class="avatar__photo-link" href="https://twitter.com/little_bret" target="_blank" rel="noreferrer noopener"><img class="avatar__photo" src="https://pbs.twimg.com/profile_images/950593946178080768/eaNp6p-u_400x400.jpg" alt="Bret Little"/></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://twitter.com/little_bret" target="_blank" rel="noreferrer noopener">Bret Little</a></h4><small class="avatar__subtitle"></small></div></div></header><section class="markdown"><p>So you are a web-developer. You write a lot of JavaScript. You have a large single-page application (SPA) with features to add and bugs to maintain. Over time the application grows in size and complexity. It becomes more difficult to modify one portion of the SPA without breaking another portion.</p><p>The company is growing and you are looking for ways to scale the team and code-base. You add unit tests. You add a linter. You add continuous integration. You modularize the code with ES2015 modules, webpack, and npm. Eventually you even introduce new, independent SPAs with each SPA being owned and deployed by independent squads. Congratulations, you have successfully introduced service-oriented architecture on the front-end, or have you?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="what-is-service-oriented-architecture"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#what-is-service-oriented-architecture" title="Direct link to heading">#</a>What is Service-oriented Architecture?</h2><p>The fundamental concept behind service-oriented architecture is a service. A service is an isolated piece of code which can only be interacted with through its API. Unlike a shared library, a service itself can be deployed independently of its consumers. Think of a back-end API. The API is the service and the browser is the consumer. The API is deployed independently of the front-end application. There is also only one deployed version of the API available at a URL.</p><p>Contrast a service to a shared library. A shared library is a piece of code that is bundled and deployed with your code. For example, libraries such as Express, Lodash, and React are all shared libraries included in your application’s distributable. Upgrading a version of a shared library requires a new deployment of that distributable.</p><p>Service-oriented architecture is an approach to building software where the application is composed of many independent and isolated services. Those services are independently deployable, generally non-versioned, and auto discoverable.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="why-service-oriented-architecture-on-the-front-end"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#why-service-oriented-architecture-on-the-front-end" title="Direct link to heading">#</a>Why Service-oriented Architecture on the Front-end?</h2><p>The benefits of SOA can be illustrated with this real life example from Canopy. At Canopy we have multiple single page applications. The first application is external to the customers and the second is internal, yet both applications share common functionality. That functionality includes among other things, authentication and error logging.</p><img src="https://cdn-images-1.medium.com/max/1600/1*itLASVdD-5a3fm56hfltYQ.png" alt="cdn-images-1"/><p style="color:gray;font-size:15px;font-style:italic">Shared libraries between two separate applications. <strong>App 1</strong> depends upon shared libs <strong>a</strong>, <strong>b</strong>, and <strong>c</strong>. <strong>App 2</strong> depends upon only shared libs <strong>a</strong> and <strong>b</strong>.</p><p>Overall the design looks good. The code is modularized and shared. The complexities arrive when we start to upgrade the code to different versions. For example, after a short period of time, <strong>App 2</strong> (being internal only) is upgraded to a new beta version of the shared lib <strong>b</strong>. Because the shared <strong>a</strong> also depends upon <strong>b</strong> (and we don’t want multiple versions of <strong>b</strong> bundled) we also create a new version of <strong>a</strong>. This one change causes a rebuild and deploy of three separate pieces of code: <strong>App 2</strong> and shared libs <strong>a</strong> and <strong>b</strong>. Our dependency structure is no longer quite so simple.</p><img src="https://cdn-images-1.medium.com/max/1600/1*T5YHqkoZApSvC32jVS0osw.png" alt="cdn-images-2"/><p style="color:gray;font-size:15px;font-style:italic">In reality, a duplicate instance of lib <strong>a</strong> and <strong>b</strong> exist in both apps. Each app does not point to the same instance of the shared libraries, even when they are the same version. This is more noticeable when the shared libraries have separate versions.</p><p>Now imagine a bug in both versions of shared lib <strong>b</strong>. In order to fix the problem, you will have to republish both versions of <strong>a</strong> and <strong>b</strong> as well as <strong>c</strong>. Also <strong>App 1</strong> and <strong>App 2</strong> will have to be re-deployed. That is five new versions to publish and two apps to redeploy, all to fix one bug. All downstream dependencies have to be redeployed when a single library is changed. This is deploy dependency hell.</p><p>Service oriented architecture avoids these problems in a couple ways. Instead of bundling common dependencies, common code is shared through independent services. Services are not bundled, but rather loaded at run time. This also means that front-end services are not versioned (just like a back-end API). Both <strong>App 1</strong> and <strong>App 2</strong> load the exact same code for a front-end service.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="introducing-sofe"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#introducing-sofe" title="Direct link to heading">#</a>Introducing sofe</h2><p>Built upon the new ECMAScript module specification, sofe is a JavaScript library that enables independently deployable JavaScript services to be retrieved at run-time in the browser. Because the new module specification isn’t available within today’s browsers, sofe relies upon <a href="https://github.com/systemjs/systemjs">System.js</a> to load services at run-time.</p><p>You can load a sofe service either with static or asynchronous imports.</p><pre class="mdxCodeBlock_1WSO"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Static imports</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword module" style="font-style:italic">import</span><span class="token plain"> auth </span><span class="token keyword module" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;auth-service!sofe&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> user </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> auth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getLoggedInUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Asynchronous imports</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token maybe-class-name">System</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="font-style:italic">import</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;auth-service!sofe&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">auth</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> auth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">getLoggedInUser</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>The real power behind sofe is that services are resolved at run-time, making them unversioned. If <strong>auth-service</strong> is redeployed, it is immediately made available to all upstream dependencies. The above scenario becomes much easier to resolve because there is only one version of each shared library as services. This is powerful because it allows you to deploy once, update everywhere. Also because the code is loaded at run-time, we can also enable developer tools to override what service is loaded into your application. Or in other words, you can test code on production without actually deploying to production.</p><img src="https://cdn-images-1.medium.com/max/1600/1*o7IS8yKgYKSDc2w7VpyZFw.png" alt="cdn-images-2"/><p style="color:gray;font-size:15px;font-style:italic">The common dependencies are now services that are independent from the application code. Because services are unversioned, the dependency structure is again flat. Each service can individually be deployed and be available to every upstream dependency.</p><p>Obviously not all front-end code should be a service. Services have their own challenges. Specifically your code has to stay backwards compatible. But code can’t always be backwards compatible. Sometimes there needs to be breaking changes. The same problem exists for back-end services. A back-end API has to stay backwards compatible. Breaking changes on the back-end are generally solved by either creating an entirely new (versioned) API or implementing feature toggles within the API itself. The same solution applies to sofe services. An entirely new sofe service can be deployed or feature toggles can exist inside the front-end service. However it is solved, the key point is that services exist outside your application within their own distributable.</p><p>Another potential problem for sofe services is performance. Because they are loaded at run-time, performance can become a concern if you synchronously load too many services during bootstrap. Performance degradation can be mitigated by asynchronously loading larger services after the application bootstraps. Despite these challenges, there are many benefits to services on the front-end. The most exciting thing about sofe is there is now an option for services in the browser. You can decide what should and shouldn’t be a service.</p><p>Getting started with sofe requires only System.js. But to help you get started we have built sofe to work with a variety of technologies, including webpack, Babel, jspm, and the Chrome Developer Tools. Sofe is also actively used in production at Canopy Tax. We would love feedback on sofe and a number of open source projects that have been built around it. As you approach your next front-end project or look to improve your existing app, consider how it might benefit from service oriented architecture.</p><p>Read more about how to get started with sofe <a href="https://github.com/CanopyTax/sofe">here</a>.</p></section><footer class="row margin-vert--lg"><div class="col text--right"><a aria-label="Read more about A Case for SOA in the Browser" href="/blog/2016/02/26/a-case-for-soa-in-the-browser"><strong>Read More</strong></a></div></footer></article><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="FAQ" href="/docs/faq/">FAQ</a></li><li class="footer__item"><a class="footer__link-item" label="Getting Started" href="/docs/getting-started-overview/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" label="API Reference" href="/docs/api/">API Reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="User Showcase" href="/users/">User Showcase</a></li><li class="footer__item"><a class="footer__link-item" label="Contributors" href="/contributors/">Contributors</a></li><li class="footer__item"><a class="footer__link-item" label="Chat in Slack" href="https://join.slack.com/t/single-spa/shared_invite/zt-j4c38g92-JmV7O~35dkN1CnaBkK7NTw" target="_blank" rel="noopener noreferrer">Chat in Slack</a></li><li class="footer__item"><a class="footer__link-item" label="Twitter" href="https://twitter.com/Single_spa/" target="_blank" rel="noopener noreferrer">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" label="GitHub" href="https://github.com/single-spa/single-spa" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="footer__item"><a class="footer__link-item" label="Donate" href="https://opencollective.com/single-spa" target="_blank" rel="noopener noreferrer">Donate</a></li><li class="footer__item"><a aria-current="page" class="footer__link-item active" label="Blog" href="/blog/">Blog</a></li><li class="footer__item footer__item--gh"><iframe title="github" src="https://ghbtns.com/github-btn.html?user=single-spa&amp;repo=single-spa&amp;type=star&amp;count=true&amp;size=small"></iframe></li><li class="footer__item"><a href="/img/icons/148705-essential-collection/license/license.html">License for icons</a></li></ul></div></div><div class="text--center"><img class="footer__logo margin-bottom--sm" alt="single-spa" src="/img/logo-white-bgblue.svg"/><div>Originally developed at <a href="https://getcanopy.com">Canopy</a></div>Copyright © 2022 single-spa.</div></div></footer>
</div>

<script type="text/javascript" src="/styles.49d4f6d0.js"></script>

<script type="text/javascript" src="/runtime~main.7ccd1675.js"></script>

<script type="text/javascript" src="/main.3c2954dd.js"></script>

<script type="text/javascript" src="/1.dfe48900.js"></script>

<script type="text/javascript" src="/2.9c220183.js"></script>

<script type="text/javascript" src="/a6aa9e1f.b87e8c50.js"></script>

<script type="text/javascript" src="/02af63f8.cb555a97.js"></script>

<script type="text/javascript" src="/d37dc8dd.79488c30.js"></script>

<script type="text/javascript" src="/6cb48572.ebef4e6d.js"></script>

<script type="text/javascript" src="/e6b6a638.d2fb0262.js"></script>

<script type="text/javascript" src="/674fa9c4.f929eaa7.js"></script>

<script type="text/javascript" src="/87c6a9c4.d1f643e3.js"></script>

<script type="text/javascript" src="/6c11b4de.08ec8b32.js"></script>

<script type="text/javascript" src="/565d74f4.434f19ea.js"></script>

<script type="text/javascript" src="/88ab1274.5d8b38b6.js"></script>

<script type="text/javascript" src="/c0c34336.299dc5ba.js"></script>

<script type="text/javascript" src="/1a9639fa.38c9d7d5.js"></script>


</body>
</html>